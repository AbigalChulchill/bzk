{"clazz":"net.bzk.flow.model.Flow","uid":"02eQyaMwyojZ","name":"OrderBinance ","boxs":[{"clazz":"net.bzk.flow.model.Box","uid":"htivUO7YKtyD","name":"Box","actions":[{"clazz":"net.bzk.flow.model.HttpAction","uid":"OcPQySOCy0Gn","name":"PostOrder","tryErrorble":false,"devBoxVars":{},"devFlowVars":{},"url":"${binance.proxyHost}proxy","uriVariables":{},"body":"{\n  \"name\": \"trade_pick/pick\",\n  \"apiKey\":\"${binance.key}\",\n  \"secret\":\"${binance.secret}\",\n  \"timeGrpSize\": 6,\n  \"timeGrpRange\":15,\n  \"timeout\": 360,\n  \"triggerAmt\": ${triggerAmt},\n  \"symbol\": \"${symbol}\",\n  \"side\": \"BUY\",\n  \"rsi\":0.2,\n  \"investedRate\": ${investedRate},\n  \"guardRange\": ${guardRange},\n  \"currentMove\":${currentMove},\n  \"tags\": ${tags}\n}","method":"POST","headers":{},"headersFlat":"","key":{"lv":"not_specify","key":"postResult"}},{"clazz":"net.bzk.flow.model.Action$MailAction","uid":"fzgczwZFFaF2","name":"NotifyMail","tryErrorble":true,"devBoxVars":{},"devFlowVars":{},"smtpHost":"\"smtp.gmail.com\"","smtpPort":"465","username":"${gmail.username}","password":"${gmail.password}","toMail":"a29243004@gmail.com","subject":"Order CMC","body":"    name=\"post_order\" \\n\\r\n    investedRate=${investedRate} \\n\\r\n    guardRange=${guardRange} \\n\\r\n    quote=${postResult.quantity} \\n\\r\n    symbol=\"${symbol}\" \\n\\r\n    selled=${selled} \\n\\r"},{"clazz":"net.bzk.flow.model.HttpAction","uid":"v76HZ4OF7xag","name":"PostRecord","tryErrorble":false,"devBoxVars":{},"devFlowVars":{},"url":"${finProxyUrl}/proxy/tsdb/insert/multiple","uriVariables":{},"body":"${packPayload}","method":"POST","headers":{},"headersFlat":"","key":{"lv":"not_specify","key":""}},{"clazz":"net.bzk.flow.model.Action$PolyglotAction","uid":"OsO92tVBABAB","name":"GenRecordDto","tryErrorble":false,"devBoxVars":{},"devFlowVars":{},"code":"const ans = [];\r\nconst dat = new Date();\r\nans.push(genPointDto('price',${postResult.price}));\r\nans.push(genPointDto('quantity',${postResult.quantity}));\r\n\r\nfunction genPointDto(fd,v,at){\r\n  const row = {\r\n      measurement : 'ordermanage',\r\n      tags:{\r\n        symbol : \"${symbol}\",\r\n        category:'cryptocurrency',\r\n        source:'cmc-linear-futures'\r\n      },\r\n      field: fd,\r\n      val:v,\r\n      time :dat\r\n  };\r\n  return row;\r\n}\r\n\r\nans;","polyglot":"js","resultLv":"not_specify","resultKey":"packPayload"}],"links":[],"vars":{},"taskSort":["OcPQySOCy0Gn","OsO92tVBABAB","v76HZ4OF7xag","fzgczwZFFaF2"],"whileJudgment":null,"transition":{"toBox":"","endTag":"TODO Why","failEnd":false,"endResultKeys":[]}}],"varCfgNames":["binance.json","mail.json","fin-proxy.json"],"vars":{"symbol":"ETC","investedRate":0.1,"currentMove":0.6,"guardRange":0.05,"selled":false},"entry":{"clazz":"net.bzk.flow.model.Entry$PluginEntry","boxUid":"htivUO7YKtyD","autoRegister":false,"requiredKeys":["investedRate","guardRange","symbol","selled","currentMove","tags","triggerAmt"],"outputKeys":[]},"logEncryptKey":"1234567890123456","threadCfg":{"corePoolSize":10,"maximumPoolSize":50,"keepAliveTime":500,"aliveUnit":"MINUTES"}}