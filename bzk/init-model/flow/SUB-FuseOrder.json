{
  "clazz" : "net.bzk.flow.model.Flow",
  "uid" : "FwGMPiyJdlPl",
  "name" : "SUB-FuseOrder",
  "boxs" : [ {
    "clazz" : "net.bzk.flow.model.Box",
    "uid" : "a4NkW28jdISd",
    "name" : "Box",
    "actions" : [ {
      "clazz" : "net.bzk.flow.model.Action$PolyglotAction",
      "uid" : "viRNYSWGuVir",
      "name" : "Vars",
      "tryErrorble" : false,
      "enable" : "true",
      "devBoxVars" : { },
      "devFlowVars" : { },
      "minLogLv" : "NONE",
      "code" : "const difPeak = ${cs.difPeak};\r\nconst positions = ${position};\r\n\r\nfunction getPositionSide(){\r\n    return difPeak.trendInfo.state == 'RISE' ? \"LONG\" : \"SHORT\";\r\n}\r\n\r\n\r\nconst positionSide = getPositionSide();\r\nconst stopPositionSide = positionSide == 'LONG' ? 'SHORT' : 'LONG';\r\n\r\n$bzk.putObj('positionSide',positionSide);\r\n$bzk.putObj('stopPositionSide',stopPositionSide);\r\n\r\nconst tarPostion = positions[stopPositionSide];\r\n$bzk.put('tarPostion',JSON.stringify(tarPostion));\r\n\r\nfunction genOrderObjJson(){\r\n\r\n    return JSON.stringify({\r\n        \"targetIdxShift\":1,\r\n        \"gapRate\":-1,\r\n        \"attachName\":'peakStop'\r\n    });\r\n}\r\n$bzk.put('~orderStopBody',genOrderObjJson());\r\n\r\ntrue;",
      "polyglot" : "js",
      "resultLv" : "not_specify",
      "resultKey" : "initVar"
    }, {
      "clazz" : "net.bzk.flow.model.Action$SubFlowAction",
      "uid" : "hSBxZdqD8vhx",
      "name" : "Order",
      "tryErrorble" : false,
      "enable" : "true",
      "devBoxVars" : { },
      "devFlowVars" : { },
      "minLogLv" : "NONE",
      "flowUid" : "substoplimit",
      "asynced" : false,
      "inputData" : [ {
        "key" : "positionSide",
        "val" : "${positionSide}"
      }, {
        "key" : "position",
        "val" : "${position}"
      }, {
        "key" : "symbol",
        "val" : "${symbol}"
      }, {
        "key" : "runStoped",
        "val" : "true"
      }, {
        "key" : "trigger",
        "val" : "fuse"
      }, {
        "key" : "runLimit",
        "val" : "false"
      } ],
      "outputReflects" : [ {
        "srcKey" : "__pk_result",
        "toKey" : {
          "lv" : "not_specify",
          "key" : ""
        }
      } ]
    } ],
    "links" : [ {
      "clazz" : "net.bzk.flow.model.Link",
      "uid" : "tF0zk2zC3dUW",
      "name" : "OverTime",
      "condition" : {
        "clazz" : "net.bzk.flow.model.Condition$ConditionNum",
        "kind" : "NONE",
        "next" : null,
        "left" : "${cs.difPeak.trendInfo.nearPeak.dtime}",
        "right" : "!javascript===\n60*5*2*1.05;",
        "type" : "greater"
      },
      "transition" : {
        "toBox" : "",
        "endTag" : "${symbol} ${stopPositionSide} OverTime",
        "failEnd" : false,
        "endResultKeys" : [ ],
        "resultCode" : "{\n  \"ordered\": false,\n  \"breakName\": \"OverTime\"\n}"
      },
      "enable" : true
    }, {
      "clazz" : "net.bzk.flow.model.Link",
      "uid" : "gi4jptN8J514",
      "name" : "NoPos",
      "condition" : {
        "clazz" : "net.bzk.flow.model.Condition$ConditionNum",
        "kind" : "NONE",
        "next" : null,
        "left" : "!javascript===\nMath.abs( ${tarPostion.positionAmt})",
        "right" : "0",
        "type" : "lessthan_equal"
      },
      "transition" : {
        "toBox" : "",
        "endTag" : "${symbol} ${stopPositionSide} NoPos",
        "failEnd" : false,
        "endResultKeys" : [ ],
        "resultCode" : "{\n  \"ordered\": false,\n  \"breakName\": \"NoPos\"\n}"
      },
      "enable" : true
    } ],
    "vars" : { },
    "taskSort" : [ "viRNYSWGuVir", "tF0zk2zC3dUW", "gi4jptN8J514", "hSBxZdqD8vhx" ],
    "whileJudgment" : null,
    "transition" : {
      "toBox" : "",
      "endTag" : "${symbol}",
      "failEnd" : false,
      "endResultKeys" : [ {
        "lv" : "not_specify",
        "key" : "LONG_resp"
      }, {
        "lv" : "not_specify",
        "key" : "SHORT_resp"
      } ],
      "resultCode" : ""
    },
    "minLogLv" : "DEBUG"
  } ],
  "varCfgNames" : [ "fin-exchange-manage.json" ],
  "vars" : { },
  "entry" : {
    "clazz" : "net.bzk.flow.model.Entry$PluginEntry",
    "boxUid" : "a4NkW28jdISd",
    "autoRegister" : false,
    "requiredKeys" : [ "__ALL__" ],
    "outputKeys" : [ "__pk_result" ]
  },
  "threadCfg" : {
    "corePoolSize" : 10,
    "maximumPoolSize" : 50,
    "keepAliveTime" : 500,
    "aliveUnit" : "MINUTES"
  },
  "version" : 44
}